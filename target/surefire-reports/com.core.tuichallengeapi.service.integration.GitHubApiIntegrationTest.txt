-------------------------------------------------------------------------------
Test set: com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest
-------------------------------------------------------------------------------
Tests run: 8, Failures: 5, Errors: 3, Skipped: 0, Time elapsed: 3.644 s <<< FAILURE! -- in com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest
com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenRepositoriesIncludeForks_thenForksAreFilteredOut -- Time elapsed: 0.532 s <<< FAILURE!
java.lang.AssertionError: Status expected:<200 OK> but was:<500 INTERNAL_SERVER_ERROR>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.reactive.server.StatusAssertions.lambda$assertStatusAndReturn$4(StatusAssertions.java:236)
	at org.springframework.test.web.reactive.server.ExchangeResult.assertWithDiagnostics(ExchangeResult.java:222)
	at org.springframework.test.web.reactive.server.StatusAssertions.assertStatusAndReturn(StatusAssertions.java:236)
	at org.springframework.test.web.reactive.server.StatusAssertions.isOk(StatusAssertions.java:68)
	at com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenRepositoriesIncludeForks_thenForksAreFilteredOut(GitHubApiIntegrationTest.java:162)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.testGetUserRepositories -- Time elapsed: 0.013 s <<< ERROR!
java.lang.ClassCastException: class java.util.Arrays$ArrayList cannot be cast to class reactor.core.publisher.Mono (java.util.Arrays$ArrayList is in module java.base of loader 'bootstrap'; reactor.core.publisher.Mono is in unnamed module of loader 'app')
	at com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.testGetUserRepositories(GitHubApiIntegrationTest.java:49)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	Suppressed: org.mockito.exceptions.misusing.UnfinishedStubbingException: 
Unfinished stubbing detected here:
-> at com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.testGetUserRepositories(GitHubApiIntegrationTest.java:49)

E.g. thenReturn() may be missing.
Examples of correct stubbing:
    when(mock.isOk()).thenReturn(true);
    when(mock.isOk()).thenThrow(exception);
    doThrow(exception).when(mock).someVoidMethod();
Hints:
 1. missing thenReturn()
 2. you are trying to stub a final method, which is not supported
 3. you are stubbing the behaviour of another mock inside before 'thenReturn' instruction is completed

		at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:86)
		at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:73)
		at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
		at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
		at org.springframework.test.context.junit.jupiter.SpringExtension.afterEach(SpringExtension.java:278)
		... 2 more

com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenValidUserWithNoRepos_thenEmptyListReturned -- Time elapsed: 0.005 s <<< ERROR!
java.lang.ClassCastException: class java.util.Collections$EmptyList cannot be cast to class reactor.core.publisher.Mono (java.util.Collections$EmptyList is in module java.base of loader 'bootstrap'; reactor.core.publisher.Mono is in unnamed module of loader 'app')
	at com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenValidUserWithNoRepos_thenEmptyListReturned(GitHubApiIntegrationTest.java:115)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	Suppressed: org.mockito.exceptions.misusing.UnfinishedStubbingException: 
Unfinished stubbing detected here:
-> at com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenValidUserWithNoRepos_thenEmptyListReturned(GitHubApiIntegrationTest.java:115)

E.g. thenReturn() may be missing.
Examples of correct stubbing:
    when(mock.isOk()).thenReturn(true);
    when(mock.isOk()).thenThrow(exception);
    doThrow(exception).when(mock).someVoidMethod();
Hints:
 1. missing thenReturn()
 2. you are trying to stub a final method, which is not supported
 3. you are stubbing the behaviour of another mock inside before 'thenReturn' instruction is completed

		at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:86)
		at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:73)
		at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
		at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
		at org.springframework.test.context.junit.jupiter.SpringExtension.afterEach(SpringExtension.java:278)
		... 2 more

com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenGitHubApiError_thenHandleGracefully -- Time elapsed: 0.064 s <<< FAILURE!
java.lang.AssertionError: No value at JSON path "$.Message"
	at org.springframework.test.util.JsonPathExpectationsHelper.evaluateJsonPath(JsonPathExpectationsHelper.java:302)
	at org.springframework.test.util.JsonPathExpectationsHelper.assertValue(JsonPathExpectationsHelper.java:99)
	at org.springframework.test.web.reactive.server.JsonPathAssertions.isEqualTo(JsonPathAssertions.java:54)
	at com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenGitHubApiError_thenHandleGracefully(GitHubApiIntegrationTest.java:108)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
Caused by: com.jayway.jsonpath.PathNotFoundException: No results for path: $['Message']

com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenValidUser_thenCorrectRepositoryStructureReturned -- Time elapsed: 0.006 s <<< ERROR!
java.lang.ClassCastException: class java.util.Arrays$ArrayList cannot be cast to class reactor.core.publisher.Mono (java.util.Arrays$ArrayList is in module java.base of loader 'bootstrap'; reactor.core.publisher.Mono is in unnamed module of loader 'app')
	at com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenValidUser_thenCorrectRepositoryStructureReturned(GitHubApiIntegrationTest.java:138)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	Suppressed: org.mockito.exceptions.misusing.UnfinishedStubbingException: 
Unfinished stubbing detected here:
-> at com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenValidUser_thenCorrectRepositoryStructureReturned(GitHubApiIntegrationTest.java:138)

E.g. thenReturn() may be missing.
Examples of correct stubbing:
    when(mock.isOk()).thenReturn(true);
    when(mock.isOk()).thenThrow(exception);
    doThrow(exception).when(mock).someVoidMethod();
Hints:
 1. missing thenReturn()
 2. you are trying to stub a final method, which is not supported
 3. you are stubbing the behaviour of another mock inside before 'thenReturn' instruction is completed

		at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:86)
		at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:73)
		at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:67)
		at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:487)
		at org.springframework.test.context.junit.jupiter.SpringExtension.afterEach(SpringExtension.java:278)
		... 2 more

com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenUserDoesNotExist_thenStatus404 -- Time elapsed: 0.019 s <<< FAILURE!
java.lang.AssertionError: Status expected:<404 NOT_FOUND> but was:<500 INTERNAL_SERVER_ERROR>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.reactive.server.StatusAssertions.lambda$assertStatusAndReturn$4(StatusAssertions.java:236)
	at org.springframework.test.web.reactive.server.ExchangeResult.assertWithDiagnostics(ExchangeResult.java:222)
	at org.springframework.test.web.reactive.server.StatusAssertions.assertStatusAndReturn(StatusAssertions.java:236)
	at org.springframework.test.web.reactive.server.StatusAssertions.isNotFound(StatusAssertions.java:153)
	at com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenUserDoesNotExist_thenStatus404(GitHubApiIntegrationTest.java:78)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenInvalidAcceptHeader_thenStatus406 -- Time elapsed: 0.019 s <<< FAILURE!
java.lang.AssertionError: Status expected:<406 NOT_ACCEPTABLE> but was:<500 INTERNAL_SERVER_ERROR>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.reactive.server.StatusAssertions.lambda$isEqualTo$0(StatusAssertions.java:53)
	at org.springframework.test.web.reactive.server.ExchangeResult.assertWithDiagnostics(ExchangeResult.java:222)
	at org.springframework.test.web.reactive.server.StatusAssertions.isEqualTo(StatusAssertions.java:53)
	at com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenInvalidAcceptHeader_thenStatus406(GitHubApiIntegrationTest.java:90)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenGitHubApiRateLimitExceeded_thenHandleError -- Time elapsed: 0.014 s <<< FAILURE!
java.lang.AssertionError: Status expected:<429 TOO_MANY_REQUESTS> but was:<500 INTERNAL_SERVER_ERROR>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:59)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:122)
	at org.springframework.test.web.reactive.server.StatusAssertions.lambda$isEqualTo$0(StatusAssertions.java:53)
	at org.springframework.test.web.reactive.server.ExchangeResult.assertWithDiagnostics(ExchangeResult.java:222)
	at org.springframework.test.web.reactive.server.StatusAssertions.isEqualTo(StatusAssertions.java:53)
	at com.core.tuichallengeapi.service.integration.GitHubApiIntegrationTest.whenGitHubApiRateLimitExceeded_thenHandleError(GitHubApiIntegrationTest.java:178)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

